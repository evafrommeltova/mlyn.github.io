<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
      <title>Babylon Template</title>

      <style>
        html, body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }
    </style>

        <script src="https://cdn.babylonjs.com/babylon.js"></script>
		<script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
		<script src="https://code.jquery.com/pep/0.4.3/pep.js"></script>



   </head>

   <body>

    <canvas id="renderCanvas" touch-action="none"></canvas> //touch-action="none" for best results from PEP

    <script>
       var canvas = document.getElementById("renderCanvas"); 
        
        
       // scene 
        var createScene = function () {
        engine.enableOfflineSupport = false;
        var scene = new BABYLON.Scene(engine);
        scene.clearColor = new BABYLON.Color3(1, 1, 1); 
    
      
            // camera
            var camera = new BABYLON.ArcRotateCamera("Camera", 2.88*Math.PI/2, 3*Math.PI /2, -30, new BABYLON.Vector3(0, 0, 0.5), scene);
            camera.attachControl(canvas, false);
            camera.lowerRadiusLimit = 15;
            camera.upperRadiusLimit = 100;
            camera.wheelDeltaPercentage = 0.01; 
            camera.setTarget(BABYLON.Vector3.Zero());    

            
            // light  
            		var light = new BABYLON.HemisphericLight("light", new BABYLON.Vector3(1, 1, 1), scene);
                light.intensity = 1.35;
            	  light.specular = new BABYLON.Color3(.0, .0, .0);    
                       
               	var light2 = new BABYLON.PointLight("light", new BABYLON.Vector3( -20, -10, -30), scene);
                light2.intensity = 0.9;
            	  light2.specular = new BABYLON.Color3(0,0,0); 

						
						BABYLON.SceneLoader.ImportMesh("","./glb/", "krytiny.gltf", scene, function (myMeshesOne) {
						BABYLON.SceneLoader.ImportMesh("","./glb/", "krovy.gltf", scene, function (myMeshesTwo) {
						BABYLON.SceneLoader.ImportMesh("","./glb/", "komin.gltf", scene, function (myMeshesThree) {
						BABYLON.SceneLoader.ImportMesh("","./glb/", "podlaha_pud.gltf", scene, function (myMeshesFour) {
						BABYLON.SceneLoader.ImportMesh("","./glb/", "podlaha_1_patro.gltf", scene, function (myMeshesFive) {
						BABYLON.SceneLoader.ImportMesh("","./glb/", "steny_1_patro.gltf", scene, function (myMeshesSix) {
						BABYLON.SceneLoader.ImportMesh("","./glb/", "schodiste.gltf", scene, function (myMeshesSeven) {
						BABYLON.SceneLoader.ImportMesh("","./glb/", "strop_svetnice.gltf", scene, function (myMeshesEight) {
						BABYLON.SceneLoader.ImportMesh("","./glb/", "steny_obvodove.gltf", scene, function (myMeshesNine) {
						BABYLON.SceneLoader.ImportMesh("","./glb/", "steny_vnitrni.gltf", scene, function (myMeshesTen) {
						BABYLON.SceneLoader.ImportMesh("","./glb/", "pec.gltf", scene, function (myMeshesEleven) {
						BABYLON.SceneLoader.ImportMesh("","./glb/", "podlaha_prizemi.gltf", scene, function (myMeshesTwelve) {
						BABYLON.SceneLoader.ImportMesh("","./glb/", "teren.gltf", scene, function (myMeshesThirteen) { console.log(myMeshesThirteen)
																																				
							
							 // add buttons
                        var buttonbox = document.createElement("div")
                        buttonbox.id = "buttonbox"
                        buttonbox.style.position = "absolute"
                        buttonbox.style.top = "300px"
                        buttonbox.style.left = "83%"
                        buttonbox.style.border = "5pt inset black"
                        buttonbox.style.padding = "2pt"
                        buttonbox.style.paddingRight = "10pt"
                        buttonbox.style.paddingLeft = "10pt"
                        buttonbox.style.width = "10em"
                        buttonbox.style.display = "block"
                        document.body.appendChild(buttonbox)

                        var tTag = document.createElement("div")
                        tTag.id = "choose"
                        tTag.textContent = "Zobrazit/Skrýt"
                        tTag.style.textAlign = "center"
                        tTag.style.border = "3pt solid gold"
                        tTag.style.marginTop = "2pt"
                        tTag.style.marginBottom = "2pt"
                        tTag.style.backgroundColor = "grey"
                        tTag.style.fontSize = "1.0em"
                        tTag.style.color = "white"
                        buttonbox.appendChild(tTag)

                        var BT1 = document.createElement("button")
                        BT1.id = "ShowHidemyMeshesOne"
                        BT1.textContent = "Střecha"
                        BT1.style.backgroundColor = "green"
                        BT1.style.display = "block"
                        BT1.style.width = "100%"
                        BT1.style.fontSize = "1.1em"
                        buttonbox.appendChild(BT1)
                        BT1.onclick = function() {
							let enable
							// Show/Hide myMeshThree
							oneEnabled = !oneEnabled;
							for (mesh of myMeshesOne){
							enable = mesh.isEnabled(oneEnabled)
							mesh.setEnabled(oneEnabled);
							BT1.style.backgroundColor = enable ? "red" : "green"
							}
						}
						
                        var BT2 = document.createElement("button")
                        BT2.id = "ShowHidemyMeshesTwo"
                        BT2.textContent = "Krovy"
                        BT2.style.backgroundColor = "green"
                        BT2.style.display = "block"
                        BT2.style.width = "100%"
                        BT2.style.fontSize = "1.1em"
                        buttonbox.appendChild(BT2)
                        BT2.onclick = function() {
							let enable
							// Show/Hide myMeshThree
							twoEnabled = !twoEnabled;
							for (mesh of myMeshesTwo){
							enable = mesh.isEnabled(twoEnabled)
							mesh.setEnabled(twoEnabled);
							BT2.style.backgroundColor = enable ? "red" : "green"
							}
						}
						
						var BT3 = document.createElement("button")
                        BT3.id = "ShowHidemyMeshesThree"
                        BT3.textContent = "Komín"
                        BT3.style.backgroundColor = "green"
                        BT3.style.display = "block"
                        BT3.style.width = "100%"
                        BT3.style.fontSize = "1.1em"
                        buttonbox.appendChild(BT3)
                        BT3.onclick = function()  {
							let enable
							// Show/Hide myMeshThree
							threeEnabled = !threeEnabled;
							for (mesh of myMeshesThree){
							enable = mesh.isEnabled(threeEnabled)
							mesh.setEnabled(threeEnabled);
							BT3.style.backgroundColor = enable ? "red" : "green"
							}
						}
						
						var BT4 = document.createElement("button")
                        BT4.id = "ShowHidemyMeshesFour"
                        BT4.textContent = "Podlahy"
                        BT4.style.backgroundColor = "green"
                        BT4.style.display = "block"
                        BT4.style.width = "100%"
                        BT4.style.fontSize = "1.1em"
                        buttonbox.appendChild(BT4)
                        BT4.onclick = function() {
							let enable
							// Show/Hide myMeshThree
							fourEnabled = !fourEnabled;
							for (mesh of myMeshesThree){
							enable = mesh.isEnabled(fourEnabled)
							mesh.setEnabled(fourEnabled);
							BT4.style.backgroundColor = enable ? "red" : "green"
							}
						}
						
						var BT5 = document.createElement("button")
                        BT5.id = "ShowHidemyMeshesFive"
                        BT5.textContent = "Stěny 1. patro"
                        BT5.style.backgroundColor = "green"
                        BT5.style.display = "block"
                        BT5.style.width = "100%"
                        BT5.style.fontSize = "1.1em"
                        buttonbox.appendChild(BT5)
                        BT5.onclick = function() {
							let enable
							// Show/Hide myMeshThree
							fiveEnabled = !fiveEnabled;
							for (mesh of myMeshesFive){
							enable = mesh.isEnabled(fiveEnabled)
							mesh.setEnabled(fiveEnabled);
							BT5.style.backgroundColor = enable ? "red" : "green"
							}
						}
						
						var BT6 = document.createElement("button")
                        BT6.id = "ShowHidemyMeshesSix"
                        BT6.textContent = "Schodiště"
                        BT6.style.backgroundColor = "green"
                        BT6.style.display = "block"
                        BT6.style.width = "100%"
                        BT6.style.fontSize = "1.1em"
                        buttonbox.appendChild(BT6)
                        BT6.onclick = function(){
							let enable
							// Show/Hide myMeshThree
							sixEnabled = !sixEnabled;
							for (mesh of myMeshesSix){
							enable = mesh.isEnabled(sixEnabled)
							mesh.setEnabled(sixEnabled);
							BT6.style.backgroundColor = enable ? "red" : "green"
							}
						}
						
						var BT7 = document.createElement("button")
                        BT7.id = "ShowHidemyMeshesSeven"
                        BT7.textContent = "Strop ve světnici"
                        BT7.style.backgroundColor = "green"
                        BT7.style.display = "block"
                        BT7.style.width = "100%"
                        BT7.style.fontSize = "1.1em"
                        buttonbox.appendChild(BT7)
                        BT7.onclick = function() {
							let enable
							// Show/Hide myMeshThree
							sevenEnabled = !sevenEnabled;
							for (mesh of myMeshesSeven){
							enable = mesh.isEnabled(sevenEnabled)
							mesh.setEnabled(sevenEnabled);
							BT7.style.backgroundColor = enable ? "red" : "green"
							}
						}
						
						var BT8 = document.createElement("button")
                        BT8.id = "ShowHidemyMeshesEight"
                        BT8.textContent = "Stěny obvodové"
                        BT8.style.backgroundColor = "green"
                        BT8.style.display = "block"
                        BT8.style.width = "100%"
                        BT8.style.fontSize = "1.1em"
                        buttonbox.appendChild(BT8)
                        BT8.onclick = function() {
							let enable
							// Show/Hide myMeshThree
							eightEnabled = !eightEnabled;
							for (mesh of myMeshesEight){
							enable = mesh.isEnabled(eightEnabled)
							mesh.setEnabled(eightEnabled);
							BT8.style.backgroundColor = enable ? "red" : "green"
							}
						}
						
						var BT9 = document.createElement("button")
                        BT9.id = "ShowHidemyMesheNine"
                        BT9.textContent = "Stěny vnitřní"
                        BT9.style.backgroundColor = "green"
                        BT9.style.display = "block"
                        BT9.style.width = "100%"
                        BT9.style.fontSize = "1.1em"
                        buttonbox.appendChild(BT9)
                        BT9.onclick = function() {
							let enable
							// Show/Hide myMeshThree
							nineEnabled = !nineEnabled;
							for (mesh of myMeshesNine){
							enable = mesh.isEnabled(nineEnabled)
							mesh.setEnabled(nineEnabled);
							BT9.style.backgroundColor = enable ? "red" : "green"
							}
						}
						
						var BT10 = document.createElement("button")
                        BT10.id = "ShowHidemyMesheTen"
                        BT10.textContent = "Pec a patro mlýnice"
                        BT10.style.backgroundColor = "green"
                        BT10.style.display = "block"
                        BT10.style.width = "100%"
                        BT10.style.fontSize = "1.1em"
                        buttonbox.appendChild(BT10)
                        BT10.onclick = function(){
							let enable
							// Show/Hide myMeshThree
							tenEnabled = !tenEnabled;
							for (mesh of myMeshesTen){
							enable = mesh.isEnabled(tenEnabled)
							mesh.setEnabled(tenEnabled);
							BT10.style.backgroundColor = enable ? "red" : "green"
							}
						}
						
						var BT11 = document.createElement("button")
                        BT11.id = "ShowHidemyMesheEleven"
                        BT11.textContent = "Podlahy přízemí"
                        BT11.style.backgroundColor = "green"
                        BT11.style.display = "block"
                        BT11.style.width = "100%"
                        BT11.style.fontSize = "1.1em"
                        buttonbox.appendChild(BT11)
                        BT11.onclick = function() {
							let enable
							// Show/Hide myMeshThree
							elevenEnabled = !elevenEnabled;
							for (mesh of myMeshesEleven){
							enable = mesh.isEnabled(elevenEnabled)
							mesh.setEnabled(elevenEnabled);
							BT11.style.backgroundColor = enable ? "red" : "green"
							}
						}                 
                        
						
						var BT12 = document.createElement("button")
                        BT12.id = "ShowHidemyMesheTwelve"
                        BT12.textContent = "Terén"
                        BT12.style.backgroundColor = "green"
                        BT12.style.display = "block"
                        BT12.style.width = "100%"
                        BT12.style.fontSize = "1.1em"
                        buttonbox.appendChild(BT12)
                        BT12.onclick = function(){
							let enable
							// Show/Hide myMeshThree
							twelveEnabled = !twelveEnabled;
							for (mesh of myMeshesTwelve){
							enable = mesh.isEnabled(twelveEnabled)
							mesh.setEnabled(twelveEnabled);
							BT12.style.backgroundColor = enable ? "red" : "green"
							}
						
						var BT13 = document.createElement("button")
                        BT13.id = "ShowHidemyMesheThirteen"
                        BT13.textContent = "Terén 1"
                        BT13.style.backgroundColor = "green"
                        BT13.style.display = "block"
                        BT13.style.width = "100%"
                        BT13.style.fontSize = "1.1em"
                        buttonbox.appendChild(BT13)
                        BT13.onclick = function() {
							let enable
							// Show/Hide myMeshThree
							thirteenEnabled = !thirteenEnabled;
							for (mesh of myMeshesThirteen){
							enable = mesh.isEnabled(twelveEnabled)
							mesh.setEnabled(thirteenEnabled);
							BT13.style.backgroundColor = enable ? "red" : "green"
							}
						}	
						
						var oneEnabled = true;
						var twoEnabled = true;
						var threeEnabled = true;
						var fourEnabled = true;
						var fiveEnabled = true;
						var sixEnabled = true;
						var sevenEnabled = true;
						var eightEnabled = true;
						var nineEnabled = true;
						var tenEnabled = true;
						var elevenEnabled = true;
						var twelveEnabled = true;
						var thirteenEnabled = true;
						
						})
						})
						})
						})
						})
						})
						})
						})
						})
						})
						})
						})
						})

						// Move the light with the camera
						scene.registerBeforeRender(function () {
						light.position = camera.position;
						})

                        return scene

                };

                /******* End of the create scene function ******/    

            var engine = new BABYLON.Engine(canvas, true, {
			preserveDrawingBuffer: true,
			stencil: true
					})
			var scene = createScene()

            engine.runRenderLoop(function () { // Register a render loop to repeatedly render the scene
                    scene.render();
            });


            window.addEventListener("resize", function () { // Watch for browser/canvas resize events
                    engine.resize();
            });
    </script>

   </body>

</html>
